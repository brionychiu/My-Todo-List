{"version":3,"sources":["firebase/config.js","context/AuthContext.js","hooks/useAuthContext.js","components/Navbar.js","hooks/useLogout.js","components/MemoList.js","components/MemoForm.js","pages/Home.js","hooks/useCollection.js","pages/Login.js","hooks/useLogin.js","pages/Signup.js","hooks/useSignup.js","App.js","index.js"],"names":["initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","db","getFirestore","auth","getAuth","AuthContext","createContext","authReducer","state","action","type","user","payload","authIsReady","AuthContextProvider","children","useReducer","dispatch","useEffect","unsub","onAuthStateChanged","console","log","Provider","value","useAuthContext","context","useContext","Error","Navbar","logout","signOut","then","catch","err","message","useLogout","to","onClick","MemoList","memos","handleClick","id","a","ref","doc","deleteDoc","className","map","memo","title","MemoForm","useState","newMemo","setNewMemo","handleSubmit","e","preventDefault","collection","addDoc","uid","onSubmit","required","onChange","target","Home","c","_q","documents","setDocuments","q","useRef","current","query","where","onSnapshot","snapshot","results","docs","forEach","push","data","useCollection","Login","email","setEmail","password","setPassword","error","setError","login","signInWithEmailAndPassword","res","useLogin","Signup","signup","createUserWithEmailAndPassword","useSignup","App","exact","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.09d10698.chunk.js","sourcesContent":["import { initializeApp } from 'firebase/app'\r\nimport { getFirestore } from 'firebase/firestore'\r\nimport { getAuth } from 'firebase/auth'\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyBJlXgnF3HIfyo5PmOWJa0sAf4lHc_-E80\",\r\n  authDomain: \"week2022-final.firebaseapp.com\",\r\n  projectId: \"week2022-final\",\r\n  storageBucket: \"week2022-final.appspot.com\",\r\n  messagingSenderId: \"345373420162\",\r\n  appId: \"1:345373420162:web:449129e8199cf42acea29b\"\r\n};\r\n\r\n// init firebase\r\ninitializeApp(firebaseConfig)\r\n\r\n// init firestore\r\nconst db = getFirestore()\r\n\r\n// init firebase auth\r\nconst auth = getAuth()\r\nexport { db , auth}","import { createContext, useReducer, useEffect } from 'react'\nimport { auth } from '../firebase/config'\nimport { onAuthStateChanged } from 'firebase/auth'\n\nexport const AuthContext = createContext()\n\nexport const authReducer = (state, action) => {\n  switch (action.type) {\n    case 'LOGIN':\n      return { ...state, user: action.payload }\n    case 'LOGOUT':\n      return { ...state, user: null }\n    case 'AUTH_IS_READY':\n      return { user: action.payload, authIsReady: true }\n    default:\n      return state\n  }\n}\n\nexport const AuthContextProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(authReducer, { \n    // init state\n    user: null,\n    authIsReady: false\n  })\n\n  useEffect(() => {\n    const unsub = onAuthStateChanged(auth , user => {\n      dispatch({ type: 'AUTH_IS_READY', payload: user })\n      unsub()\n    })\n  }, [])\n\n  console.log('AuthContext state:', state)\n  \n  return (\n    <AuthContext.Provider value={{ ...state, dispatch }}>\n      { children }\n    </AuthContext.Provider>\n  )\n\n}","import { AuthContext } from \"../context/AuthContext\"\nimport { useContext } from \"react\"\n\nexport const useAuthContext = () => {\n  const context = useContext(AuthContext)\n\n  if(!context) {\n    throw Error('useAuthContext must be used inside an AuthContextProvider')\n  }\n\n  return context\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { useLogout } from '../hooks/useLogout'\r\n\r\nexport default function Navbar() {\r\n  const { logout } = useLogout()\r\n\r\n  return (\r\n    <nav>\r\n      <h1>My Todo List</h1>\r\n      <ul>\r\n        <li><Link to=\"/\">Home</Link></li>\r\n        <li><Link to=\"/login\">Login</Link></li>\r\n        <li><Link to=\"/signup\">Signup</Link></li>\r\n        <li onClick={logout}>Logout</li>\r\n      </ul>\r\n    </nav>\r\n  )\r\n}\r\n","import { useAuthContext } from './useAuthContext'\r\n\r\n// firebase import\r\nimport { auth } from '../firebase/config'\r\nimport { signOut } from 'firebase/auth'\r\n\r\nexport const useLogout = () => {\r\n    const { dispatch } = useAuthContext()\r\n    \r\n    const logout = () => {\r\n        signOut(auth)\r\n            .then(() => {\r\n                dispatch({type:'LOGOUT'})\r\n            })\r\n            .catch((err) => {\r\n                console.log(err.message)\r\n            })\r\n    }\r\n\r\n    return { logout }\r\n}","// firebase\r\nimport { db } from '../firebase/config'\r\nimport { doc , deleteDoc } from 'firebase/firestore'\r\n\r\nexport default function MemoList({ memos }) {\r\n\r\n  const handleClick = async (id) => {\r\n    const ref = doc(db , 'memos',id)\r\n    await deleteDoc(ref)\r\n  }\r\n\r\n  return (\r\n    <div className=\"memo-list\">\r\n      <ul>\r\n        {memos.map(memo => (\r\n          <li key={memo.id} onClick={() => handleClick(memo.id)}>{memo.title}</li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  )\r\n}","import { useState } from 'react'\r\nimport { useAuthContext } from '../hooks/useAuthContext'\r\n\r\n// firebase imports\r\nimport { db } from '../firebase/config'\r\nimport { collection , addDoc } from 'firebase/firestore'\r\n\r\nexport default function MemoForm() {\r\n  const [newMemo, setNewMemo] = useState('')\r\n  const { user } = useAuthContext()\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault()\r\n    \r\n    const ref = collection(db , 'memos')\r\n    await addDoc(ref , {\r\n      title:newMemo,\r\n      uid:user.uid\r\n    })\r\n\r\n    setNewMemo('')\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <label>\r\n        <span>Add a new memo:</span>\r\n        <input \r\n          required\r\n          type=\"text\"\r\n          onChange={(e) => setNewMemo(e.target.value)}\r\n          value={newMemo}\r\n        />\r\n      </label>\r\n      <button>Add</button>\r\n    </form>\r\n  )\r\n}\r\n","import MemoList from '../components/MemoList'\r\nimport MemoForm from '../components/MemoForm'\r\nimport { useCollection } from '../hooks/useCollection'\r\nimport { useAuthContext } from '../hooks/useAuthContext'\r\n\r\n\r\nexport default function Home() {\r\n  const { user } = useAuthContext()\r\n  const { documents:memos } = useCollection(\r\n    'memos',\r\n    ['uid','==',user.uid]\r\n    )\r\n\r\n  return (\r\n    <div>\r\n      {memos && <MemoList memos={memos} />}\r\n      <MemoForm />\r\n    </div>\r\n  );\r\n}\r\n","import { useState , useEffect , useRef } from 'react'\r\nimport { db } from '../firebase/config'\r\n\r\n// firebase imports\r\nimport { collection , onSnapshot , query , where } from 'firebase/firestore'\r\n\r\nexport const useCollection = (c , _q) => {\r\n    const [ documents , setDocuments ] = useState(null)\r\n    const q = useRef(_q).current\r\n    \r\n    useEffect(() => {\r\n        let ref = collection(db,c)\r\n\r\n        if (q) {\r\n            ref = query(ref , where(...q))\r\n        }\r\n        // onSnapshot:realtime data\r\n        const unsub = onSnapshot(ref , (snapshot) => {\r\n            let results = []\r\n            snapshot.docs.forEach(doc => {\r\n                results.push({...doc.data(),id:doc.id})\r\n            });\r\n            setDocuments(results)\r\n\r\n        })\r\n        return () => unsub()\r\n    },[c,q])\r\n\r\n    return { documents }\r\n}\r\n \r\n","import { useState } from 'react'\r\nimport { useLogin } from '../hooks/useLogin'\r\n\r\nexport default function Login() {\r\n  const [email, setEmail] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const { error , login } = useLogin()\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    login(email, password)\r\n  }\r\n  \r\n  return (\r\n    <div>\r\n      <h2>Login</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        <label>\r\n          <span>email:</span>\r\n          <input\r\n            required\r\n            type=\"email\"\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            value={email}\r\n          />\r\n        </label>\r\n        <label>\r\n          <span>password:</span>\r\n          <input\r\n            required\r\n            type=\"password\"\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            value={password}\r\n          />\r\n        </label>\r\n        <button>log in</button>\r\n        { error && <p>{error}</p>}\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n","import { useState } from \"react\"\r\nimport { useAuthContext } from './useAuthContext'\r\n\r\n// firebase imports\r\nimport { auth } from '../firebase/config'\r\nimport { signInWithEmailAndPassword } from 'firebase/auth'\r\n\r\nexport const useLogin = () => {\r\n    const [ error , setError ] = useState(null)\r\n    const { dispatch } = useAuthContext()\r\n\r\n    const login = (email , password) => {\r\n        setError(null)\r\n        signInWithEmailAndPassword(auth, email, password)\r\n            .then((res) => {\r\n                dispatch({type:'LOGIN',payload:res.user})\r\n            })\r\n            .catch((err) => {\r\n                setError(err.message)\r\n            })\r\n            \r\n    } \r\n\r\n    return { error , login }\r\n}","import { useState } from 'react'\r\nimport { useSignup } from '../hooks/useSignup'\r\n\r\nexport default function Signup() {\r\n  const [email, setEmail] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const { error , signup } = useSignup()\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    signup(email, password)\r\n  }\r\n  \r\n  return (\r\n    <div>\r\n      <h2>Signup</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        <label>\r\n          <span>email:</span>\r\n          <input\r\n            required\r\n            type=\"email\"\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            value={email}\r\n          />\r\n        </label>\r\n        <label>\r\n          <span>password:</span>\r\n          <input\r\n            required\r\n            type=\"password\"\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            value={password}\r\n          />\r\n        </label>\r\n        <button>sign up</button>\r\n        {error && <p>{error}</p>}\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n","import { useState } from 'react'\r\nimport { useAuthContext } from './useAuthContext'\r\n\r\n// firebase imports\r\nimport { auth } from '../firebase/config'\r\nimport { createUserWithEmailAndPassword } from 'firebase/auth'\r\n\r\nexport const useSignup = () => {\r\n    const [ error , setError ] = useState(null)\r\n    const { dispatch } = useAuthContext()\r\n\r\n    const signup = (email , password) => {\r\n        setError(null)\r\n        createUserWithEmailAndPassword(auth, email, password)\r\n            .then((res) => {\r\n                dispatch({type:'LOGIN' , payload:res.user})\r\n            })\r\n            .catch((err) => {\r\n                setError(err.message)\r\n            })\r\n            \r\n    } \r\n\r\n    return { error , signup }\r\n} ","import { BrowserRouter, Switch, Route ,Redirect } from 'react-router-dom'\nimport { useAuthContext } from './hooks/useAuthContext'\n\n// components\nimport Navbar from './components/Navbar'\nimport Home from './pages/Home'\nimport Login from './pages/Login'\nimport Signup from './pages/Signup'\n\nfunction App() {\n  const { user , authIsReady } = useAuthContext()\n\n  return (\n    <div className=\"App\">\n      { authIsReady && (\n        <BrowserRouter>\n          <Navbar />\n          <Switch>\n            <Route exact path=\"/\">\n              {user && <Home />}\n              {!user && <Redirect to='/login'/>}\n            </Route>\n            <Route path=\"/signup\">\n            {!user && <Signup />}\n            {user && <Redirect to='/'/>}\n            </Route>\n            <Route path=\"/login\">\n            {!user && <Login />}\n            {user && <Redirect to='/'/>}\n            </Route>\n          </Switch>\n        </BrowserRouter>\n      )}\n    </div>\n  );\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport { AuthContextProvider } from './context/AuthContext'\n\nReactDOM.render(\n  <React.StrictMode>\n    <AuthContextProvider>\n      <App />\n    </AuthContextProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}