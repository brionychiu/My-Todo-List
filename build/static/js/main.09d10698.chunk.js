(this["webpackJsonpreading-list"]=this["webpackJsonpreading-list"]||[]).push([[0],{51:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var c=n(10),r=n.n(c),a=n(42),s=n.n(a),i=(n(51),n(31)),u=n(15),j=n(11),o=n(26),b=n(43),l=n(21),O=n(25);Object(b.a)({apiKey:"AIzaSyBJlXgnF3HIfyo5PmOWJa0sAf4lHc_-E80",authDomain:"week2022-final.firebaseapp.com",projectId:"week2022-final",storageBucket:"week2022-final.appspot.com",messagingSenderId:"345373420162",appId:"1:345373420162:web:449129e8199cf42acea29b"});var d=Object(l.e)(),h=Object(O.b)(),p=n(9),f=Object(c.createContext)(),x=function(e,t){switch(t.type){case"LOGIN":return Object(o.a)(Object(o.a)({},e),{},{user:t.payload});case"LOGOUT":return Object(o.a)(Object(o.a)({},e),{},{user:null});case"AUTH_IS_READY":return{user:t.payload,authIsReady:!0};default:return e}},v=function(e){var t=e.children,n=Object(c.useReducer)(x,{user:null,authIsReady:!1}),r=Object(j.a)(n,2),a=r[0],s=r[1];return Object(c.useEffect)((function(){var e=Object(O.c)(h,(function(t){s({type:"AUTH_IS_READY",payload:t}),e()}))}),[]),console.log("AuthContext state:",a),Object(p.jsx)(f.Provider,{value:Object(o.a)(Object(o.a)({},a),{},{dispatch:s}),children:t})},m=function(){var e=Object(c.useContext)(f);if(!e)throw Error("useAuthContext must be used inside an AuthContextProvider");return e};function g(){var e=function(){var e=m().dispatch;return{logout:function(){Object(O.e)(h).then((function(){e({type:"LOGOUT"})})).catch((function(e){console.log(e.message)}))}}}().logout;return Object(p.jsxs)("nav",{children:[Object(p.jsx)("h1",{children:"My Todo List"}),Object(p.jsxs)("ul",{children:[Object(p.jsx)("li",{children:Object(p.jsx)(i.b,{to:"/",children:"Home"})}),Object(p.jsx)("li",{children:Object(p.jsx)(i.b,{to:"/login",children:"Login"})}),Object(p.jsx)("li",{children:Object(p.jsx)(i.b,{to:"/signup",children:"Signup"})}),Object(p.jsx)("li",{onClick:e,children:"Logout"})]})]})}var y=n(0),S=n.n(y),w=n(1);function I(e){var t=e.memos,n=function(){var e=Object(w.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(l.d)(d,"memos",t),e.next=3,Object(l.c)(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"memo-list",children:Object(p.jsx)("ul",{children:t.map((function(e){return Object(p.jsx)("li",{onClick:function(){return n(e.id)},children:e.title},e.id)}))})})}function A(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),n=t[0],r=t[1],a=m().user,s=function(){var e=Object(w.a)(S.a.mark((function e(t){var c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c=Object(l.b)(d,"memos"),e.next=4,Object(l.a)(c,{title:n,uid:a.uid});case 4:r("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)("form",{onSubmit:s,children:[Object(p.jsxs)("label",{children:[Object(p.jsx)("span",{children:"Add a new memo:"}),Object(p.jsx)("input",{required:!0,type:"text",onChange:function(e){return r(e.target.value)},value:n})]}),Object(p.jsx)("button",{children:"Add"})]})}var C=n(13);function k(){var e=function(e,t){var n=Object(c.useState)(null),r=Object(j.a)(n,2),a=r[0],s=r[1],i=Object(c.useRef)(t).current;return Object(c.useEffect)((function(){var t=Object(l.b)(d,e);i&&(t=Object(l.g)(t,l.h.apply(void 0,Object(C.a)(i))));var n=Object(l.f)(t,(function(e){var t=[];e.docs.forEach((function(e){t.push(Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id}))})),s(t)}));return function(){return n()}}),[e,i]),{documents:a}}("memos",["uid","==",m().user.uid]).documents;return Object(p.jsxs)("div",{children:[e&&Object(p.jsx)(I,{memos:e}),Object(p.jsx)(A,{})]})}function L(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(j.a)(a,2),i=s[0],u=s[1],o=function(){var e=Object(c.useState)(null),t=Object(j.a)(e,2),n=t[0],r=t[1],a=m().dispatch;return{error:n,login:function(e,t){r(null),Object(O.d)(h,e,t).then((function(e){a({type:"LOGIN",payload:e.user})})).catch((function(e){r(e.message)}))}}}(),b=o.error,l=o.login;return Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:"Login"}),Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),l(n,i)},children:[Object(p.jsxs)("label",{children:[Object(p.jsx)("span",{children:"email:"}),Object(p.jsx)("input",{required:!0,type:"email",onChange:function(e){return r(e.target.value)},value:n})]}),Object(p.jsxs)("label",{children:[Object(p.jsx)("span",{children:"password:"}),Object(p.jsx)("input",{required:!0,type:"password",onChange:function(e){return u(e.target.value)},value:i})]}),Object(p.jsx)("button",{children:"log in"}),b&&Object(p.jsx)("p",{children:b})]})]})}function E(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(j.a)(a,2),i=s[0],u=s[1],o=function(){var e=Object(c.useState)(null),t=Object(j.a)(e,2),n=t[0],r=t[1],a=m().dispatch;return{error:n,signup:function(e,t){r(null),Object(O.a)(h,e,t).then((function(e){a({type:"LOGIN",payload:e.user})})).catch((function(e){r(e.message)}))}}}(),b=o.error,l=o.signup;return Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:"Signup"}),Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),l(n,i)},children:[Object(p.jsxs)("label",{children:[Object(p.jsx)("span",{children:"email:"}),Object(p.jsx)("input",{required:!0,type:"email",onChange:function(e){return r(e.target.value)},value:n})]}),Object(p.jsxs)("label",{children:[Object(p.jsx)("span",{children:"password:"}),Object(p.jsx)("input",{required:!0,type:"password",onChange:function(e){return u(e.target.value)},value:i})]}),Object(p.jsx)("button",{children:"sign up"}),b&&Object(p.jsx)("p",{children:b})]})]})}var R=function(){var e=m(),t=e.user,n=e.authIsReady;return Object(p.jsx)("div",{className:"App",children:n&&Object(p.jsxs)(i.a,{children:[Object(p.jsx)(g,{}),Object(p.jsxs)(u.d,{children:[Object(p.jsxs)(u.b,{exact:!0,path:"/",children:[t&&Object(p.jsx)(k,{}),!t&&Object(p.jsx)(u.a,{to:"/login"})]}),Object(p.jsxs)(u.b,{path:"/signup",children:[!t&&Object(p.jsx)(E,{}),t&&Object(p.jsx)(u.a,{to:"/"})]}),Object(p.jsxs)(u.b,{path:"/login",children:[!t&&Object(p.jsx)(L,{}),t&&Object(p.jsx)(u.a,{to:"/"})]})]})]})})};s.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(v,{children:Object(p.jsx)(R,{})})}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.09d10698.chunk.js.map